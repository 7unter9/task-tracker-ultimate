<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Store Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsbarcode/3.11.5/JsBarcode.all.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .glass { 
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        .scan-input {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border: 2px solid transparent;
            background-clip: padding-box;
            transition: all 0.3s ease;
        }
        .scan-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in {
            animation: fadeIn 0.5s ease-out;
        }
        .pulse-dot {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        @media print {
            nav, button { display: none; }
            #labels-container { 
                display: grid !important;
                grid-template-columns: repeat(3, 1fr) !important;
            }
        }
    </style>
</head>
<body>
    <!-- Modern Navigation -->
    <nav class="gradient-bg text-white shadow-2xl sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <span class="text-2xl">üì¶</span>
                    </div>
                    <span class="text-xl font-bold">IT Store Pro</span>
                </div>
                <div class="flex gap-6">
                    <button onclick="showPage('dashboard')" class="nav-btn hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg transition">
                        üìä Dashboard
                    </button>
                    <button onclick="showPage('items')" class="nav-btn hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg transition">
                        üìã Items
                    </button>
                    <button onclick="showPage('scan')" class="nav-btn hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg transition">
                        üîç Scan
                    </button>
                    <button onclick="showPage('issuances')" class="nav-btn hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg transition">
                        üìù History
                    </button>
                    <button onclick="showPage('labels')" class="nav-btn hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg transition">
                        üè∑Ô∏è Labels
                    </button>
                    <button onclick="showPage('add-item')" class="nav-btn hover:bg-white hover:bg-opacity-20 px-4 py-2 rounded-lg transition">
                        ‚ûï Add
                    </button>
                </div>
            </div>
        </div>
    </nav>

```
<div class="container mx-auto px-6 py-8">
    <!-- Dashboard -->
    <div id="dashboard" class="page animate-in">
        <div class="mb-8">
            <h1 class="text-5xl font-bold text-gray-800 mb-2">Inventory Dashboard</h1>
            <p class="text-gray-600 text-lg">Real-time overview of your IT assets</p>
        </div>
        
        <div id="stats-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </div>

    <!-- Items List -->
    <div id="items" class="page hidden animate-in">
        <div class="mb-8">
            <h1 class="text-5xl font-bold text-gray-800 mb-2">All Items</h1>
            <p class="text-gray-600 text-lg">Complete inventory list with locations</p>
        </div>
        
        <div class="glass rounded-2xl shadow-2xl overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="gradient-bg text-white">
                        <tr>
                            <th class="p-4 text-left font-semibold">Barcode</th>
                            <th class="p-4 text-left font-semibold">Item Name</th>
                            <th class="p-4 text-left font-semibold">Category</th>
                            <th class="p-4 text-left font-semibold">Location</th>
                            <th class="p-4 text-left font-semibold">Total</th>
                            <th class="p-4 text-left font-semibold">Available</th>
                            <th class="p-4 text-left font-semibold">Issued</th>
                        </tr>
                    </thead>
                    <tbody id="items-table" class="bg-white"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Issuances -->
    <div id="issuances" class="page hidden animate-in">
        <div class="mb-8">
            <h1 class="text-5xl font-bold text-gray-800 mb-2">Issuance History</h1>
            <p class="text-gray-600 text-lg">Track all equipment assignments</p>
        </div>
        
        <div class="glass rounded-2xl shadow-2xl overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="gradient-bg text-white">
                        <tr>
                            <th class="p-4 text-left font-semibold">Item</th>
                            <th class="p-4 text-left font-semibold">Barcode</th>
                            <th class="p-4 text-left font-semibold">Recipient</th>
                            <th class="p-4 text-left font-semibold">Department</th>
                            <th class="p-4 text-left font-semibold">Purpose</th>
                            <th class="p-4 text-left font-semibold">Issued By</th>
                            <th class="p-4 text-left font-semibold">Qty</th>
                            <th class="p-4 text-left font-semibold">Date</th>
                        </tr>
                    </thead>
                    <tbody id="issuances-table" class="bg-white"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Scan & Issue -->
    <div id="scan" class="page hidden animate-in">
        <div class="mb-8">
            <h1 class="text-5xl font-bold text-gray-800 mb-2">Quick Scan & Issue</h1>
            <p class="text-gray-600 text-lg">Scan barcode to instantly process equipment</p>
        </div>
        
        <div class="max-w-3xl mx-auto">
            <div class="glass rounded-2xl shadow-2xl p-8">
                <div class="mb-8">
                    <label class="block text-xl font-bold text-gray-800 mb-4">
                        üîç Scan or Enter Barcode
                    </label>
                    <input type="text" id="barcode-input" 
                           class="scan-input w-full p-6 rounded-xl text-2xl font-mono focus:outline-none" 
                           placeholder="IT001, IT002, IT003..." autofocus>
                    <div class="mt-4 flex items-center gap-2 text-sm text-gray-500">
                        <div class="w-2 h-2 bg-green-500 rounded-full pulse-dot"></div>
                        <span>Ready to scan - Try: IT001 (Anaya Telephone) or IT003 (Laptop)</span>
                    </div>
                </div>
                
                <div id="scanned-item" class="hidden mb-8 p-6 rounded-xl" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <h3 class="text-white font-bold text-2xl mb-4">‚úì Item Found</h3>
                    <div class="bg-white bg-opacity-20 rounded-lg p-4 text-white">
                        <p id="scanned-name" class="text-2xl font-bold mb-2"></p>
                        <p id="scanned-location" class="text-lg mb-1"></p>
                        <p id="scanned-available" class="text-xl font-semibold"></p>
                    </div>
                </div>

                <form id="scan-issue-form" class="space-y-6 hidden">
                    <input type="hidden" id="scan-item-id">
                    
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Department</label>
                        <select id="scan-department" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition">
                            <option value="">Select Department</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Recipient Name</label>
                        <input type="text" id="scan-recipient" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" required>
                    </div>
                    
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Purpose</label>
                        <input type="text" id="scan-purpose" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" required>
                    </div>
                    
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Issued By</label>
                        <input type="text" id="scan-issued-by" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" required>
                    </div>
                    
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Quantity</label>
                        <input type="number" id="scan-quantity" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" min="1" required>
                    </div>
                    
                    <div class="flex gap-4">
                        <button type="submit" class="btn-primary flex-1 text-white px-8 py-4 rounded-xl font-bold text-lg">
                            ‚úì Issue Item
                        </button>
                        <button type="button" onclick="resetScan()" class="bg-gray-200 hover:bg-gray-300 px-8 py-4 rounded-xl font-bold text-lg transition">
                            Cancel
                        </button>
                    </div>
                </form>
                
                <div id="scan-message" class="mt-6 p-4 rounded-xl hidden"></div>
            </div>
        </div>
    </div>

    <!-- Labels -->
    <div id="labels" class="page hidden animate-in">
        <div class="mb-8">
            <h1 class="text-5xl font-bold text-gray-800 mb-2">Barcode Labels</h1>
            <p class="text-gray-600 text-lg">Print labels for your inventory</p>
        </div>
        
        <div class="mb-6">
            <button onclick="printLabels()" class="btn-primary text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg">
                üñ®Ô∏è Print All Labels
            </button>
        </div>
        
        <div id="labels-container" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
    </div>

    <!-- Add New Item -->
    <div id="add-item" class="page hidden animate-in">
        <div class="mb-8">
            <h1 class="text-5xl font-bold text-gray-800 mb-2">Add New Item</h1>
            <p class="text-gray-600 text-lg">Register new equipment in the system</p>
        </div>
        
        <div class="max-w-3xl mx-auto">
            <div class="glass rounded-2xl shadow-2xl p-8">
                <form id="add-item-form" class="space-y-6">
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Item Name</label>
                        <input type="text" id="new-name" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" placeholder="e.g., Dell Laptop" required>
                    </div>
                    
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Category</label>
                        <select id="new-category" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" required>
                            <option value="">Select Category</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block font-semibold text-gray-700 mb-2">Shelf (1-6)</label>
                            <input type="number" id="new-shelf" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" min="1" max="6" required>
                        </div>
                        <div>
                            <label class="block font-semibold text-gray-700 mb-2">Row (1-24)</label>
                            <input type="number" id="new-row" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" min="1" max="24" required>
                        </div>
                        <div>
                            <label class="block font-semibold text-gray-700 mb-2">Position (1-4)</label>
                            <input type="number" id="new-position" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" min="1" max="4" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block font-semibold text-gray-700 mb-2">Quantity</label>
                        <input type="number" id="new-quantity" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition" min="0" value="0" required>
                        <p class="text-sm text-gray-500 mt-2">üí° Enter 0 if just adding for record</p>
                    </div>
                    
                    <button type="submit" class="btn-primary w-full text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg">
                        ‚ûï Add Item to Inventory
                    </button>
                </form>
                
                <div id="add-message" class="mt-6 p-4 rounded-xl hidden"></div>
            </div>
        </div>
    </div>
</div>

<script>
    const categories = [
        {id: 1, name: 'Laptops', icon: 'üíª'},
        {id: 2, name: 'Monitors', icon: 'üñ•Ô∏è'},
        {id: 3, name: 'Peripherals', icon: '‚å®Ô∏è'},
        {id: 4, name: 'Networking', icon: 'üåê'},
        {id: 5, name: 'Printers', icon: 'üñ®Ô∏è'},
        {id: 6, name: 'Accessories', icon: 'üéß'}
    ];

    const departments = [
        {id: 1, name: 'IT Department'},
        {id: 2, name: 'HR Department'},
        {id: 3, name: 'Finance'},
        {id: 4, name: 'Marketing'},
        {id: 5, name: 'Operations'}
    ];

    let nextItemId = 8;
    let items = [
        {id: 1, barcode: 'IT001', category_id: 6, name: 'Anaya Telephone', location: 'S2-R3-P1', total_quantity: 15, available_quantity: 10},
        {id: 2, barcode: 'IT002', category_id: 5, name: 'Printer Cartridge', location: 'S3-R8-P4', total_quantity: 50, available_quantity: 35},
        {id: 3, barcode: 'IT003', category_id: 1, name: 'Laptop', location: 'S1-R5-P2', total_quantity: 20, available_quantity: 12},
        {id: 4, barcode: 'IT004', category_id: 4, name: 'Ethernet Cable', location: 'S1-R12-P3', total_quantity: 100, available_quantity: 75},
        {id: 5, barcode: 'IT005', category_id: 6, name: 'Presentation Clicker', location: 'S2-R7-P2', total_quantity: 10, available_quantity: 6},
        {id: 6, barcode: 'IT006', category_id: 2, name: 'LED Screen', location: 'S4-R15-P1', total_quantity: 8, available_quantity: 3},
        {id: 7, barcode: 'IT007', category_id: 4, name: 'Network Switch', location: 'S1-R20-P4', total_quantity: 12, available_quantity: 8}
    ];

    let issuances = [
        {id: 1, item_id: 1, department_id: 2, recipient_name: 'Sarah Johnson', purpose: 'Office Communication', issued_by: 'IT Manager', quantity: 2, issued_date: '2024-12-01'},
        {id: 2, item_id: 3, department_id: 1, recipient_name: 'John Smith', purpose: 'Development Work', issued_by: 'Admin', quantity: 3, issued_date: '2024-12-03'},
        {id: 3, item_id: 4, department_id: 4, recipient_name: 'Mike Davis', purpose: 'Network Setup', issued_by: 'IT Manager', quantity: 10, issued_date: '2024-12-05'},
        {id: 4, item_id: 2, department_id: 5, recipient_name: 'Emily Brown', purpose: 'Printing Supplies', issued_by: 'Admin', quantity: 5, issued_date: '2024-12-07'},
        {id: 5, item_id: 5, department_id: 4, recipient_name: 'David Wilson', purpose: 'Presentations', issued_by: 'Admin', quantity: 2, issued_date: '2024-12-10'},
        {id: 6, item_id: 6, department_id: 3, recipient_name: 'Lisa Anderson', purpose: 'Conference Room', issued_by: 'IT Manager', quantity: 3, issued_date: '2024-12-12'},
        {id: 7, item_id: 1, department_id: 1, recipient_name: 'Tom Harris', purpose: 'IT Support', issued_by: 'Admin', quantity: 3, issued_date: '2024-12-13'}
    ];

    let nextIssuanceId = 8;

    function showPage(page) {
        document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
        document.getElementById(page).classList.remove('hidden');
        
        if (page === 'dashboard') renderDashboard();
        if (page === 'items') renderItems();
        if (page === 'issuances') renderIssuances();
        if (page === 'scan') setupScan();
        if (page === 'labels') renderLabels();
        if (page === 'add-item') setupAddItem();
    }

    function renderDashboard() {
        const stats = {};
        categories.forEach(cat => {
            stats[cat.name] = {icon: cat.icon, total: 0, available: 0, issued: 0, items: []};
        });

        items.forEach(item => {
            const cat = categories.find(c => c.id === item.category_id).name;
            stats[cat].total += item.total_quantity;
            stats[cat].available += item.available_quantity;
            stats[cat].issued += (item.total_quantity - item.available_quantity);
            
            const itemIssuances = issuances.filter(iss => iss.item_id === item.id);
            if (itemIssuances.length > 0) {
                stats[cat].items.push({
                    name: item.name,
                    users: itemIssuances.map(iss => iss.recipient_name)
                });
            }
        });

        const grid = document.getElementById('stats-grid');
        grid.innerHTML = Object.entries(stats).map(([cat, data]) => `
            <div class="glass rounded-2xl shadow-xl p-6 card-hover">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">${cat}</h2>
                    <span class="text-4xl">${data.icon}</span>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Total</span>
                        <span class="text-3xl font-bold text-gray-800">${data.total}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-green-600 font-semibold">Available</span>
                        <span class="text-2xl font-bold text-green-600">${data.available}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-red-600 font-semibold">Issued</span>
                        <span class="text-2xl font-bold text-red-600">${data.issued}</span>
                    </div>
                </div>
                ${data.items.length > 0 ? `
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <p class="text-sm font-bold text-gray-700 mb-3">üìã Issued to:</p>
                        ${data.items.map(item => `
                            <div class="mb-3 bg-white bg-opacity-50 rounded-lg p-3">
                                <p class="font-semibold text-gray-800 text-sm">${item.name}</p>
                                <p class="text-gray-600 text-xs mt-1">${item.users.join(', ')}</p>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
            </div>
        `).join('');
    }

    function renderItems() {
        const tbody = document.getElementById('items-table');
        tbody.innerHTML = items.map(item => {
            const cat = categories.find(c => c.id === item.category_id).name;
            const issued = item.total_quantity - item.available_quantity;
            return `
                <tr class="border-b border-gray-100 hover:bg-purple-50 transition">
                    <td class="p-4 font-mono font-bold text-purple-600">${item.barcode}</td>
                    <td class="p-4 font-semibold text-gray-800">${item.name}</td>
                    <td class="p-4 text-gray-600">${cat}</td>
                    <td class="p-4 font-mono text-blue-600 font-semibold">${item.location}</td>
                    <td class="p-4 font-bold text-gray-800">${item.total_quantity}</td>
                    <td class="p-4 text-green-600 font-bold">${item.available_quantity}</td>
                    <td class="p-4 text-red-600 font-bold">${issued}</td>
                </tr>
            `;
        }).join('');
    }

    function renderIssuances() {
        const tbody = document.getElementById('issuances-table');
        tbody.innerHTML = issuances.map(iss => {
            const item = items.find(i => i.id === iss.item_id);
            const dept = departments.find(d => d.id === iss.department_id);
            return `
                <tr class="border-b border-gray-100 hover:bg-purple-50 transition">
                    <td class="p-4 font-semibold text-gray-800">${item.name}</td>
                    <td class="p-4 font-mono text-purple-600 font-bold">${item.barcode}</td>
                    <td class="p-4 font-semibold text-gray-800">${iss.recipient_name}</td>
                    <td class="p-4 text-gray-600">${dept.name}</td>
                    <td class="p-4 text-gray-600">${iss.purpose}</td>
                    <td class="p-4 text-gray-600">${iss.issued_by}</td>
                    <td class="p-4 font-bold text-gray-800">${iss.quantity}</td>
                    <td class="p-4 text-gray-600">${iss.issued_date}</td>
                </tr>
            `;
        }).join('');
    }

    function setupScan() {
        const deptSelect = document.getElementById('scan-department');
        deptSelect.innerHTML = '<option value="">Select Department</option>' + 
            departments.map(d => `<option value="${d.id}">${d.name}</option>`).join('');
        
        document.getElementById('barcode-input').focus();
        resetScan();
    }

    function resetScan() {
        document.getElementById('barcode-input').value = '';
        document.getElementById('scanned-item').classList.add('hidden');
        document.getElementById('scan-issue-form').classList.add('hidden');
        document.getElementById('scan-issue-form').reset();
        document.getElementById('barcode-input').focus();
    }

    document.getElementById('barcode-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            const barcode = this.value.trim().toUpperCase();
            const item = items.find(i => i.barcode === barcode);
            
            if (item) {
                document.getElementById('scan-item-id').value = item.id;
                document.getElementById('scanned-name').textContent = item.name;
                document.getElementById('scanned-location').textContent = `üìç Location: ${item.location}`;
                document.getElementById('scanned-available').textContent = `‚úì Available: ${item.available_quantity} units`;
                document.getElementById('scanned-item').classList.remove('hidden');
                document.getElementById('scan-issue-form').classList.remove('hidden');
                document.getElementById('scan-quantity').max = item.available_quantity;
                document.getElementById('scan-quantity').value = 1;
            } else {
                showScanMessage('‚ùå Barcode not found! Please try again.', 'error');
            }
        }
    });

    document.getElementById('scan-issue-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const itemId = parseInt(document.getElementById('scan-item-id').value);
        const deptId = parseInt(document.getElementById('scan-department').value);
        const recipient = document.getElementById('scan-recipient').value;
        const purpose = document.getElementById('scan-purpose').value;
        const issuedBy = document.getElementById('scan-issued-by').value;
        const quantity = parseInt(document.getElementById('scan-quantity').value);

        const item = items.find(i => i.id === itemId);
        
        if (item.available_quantity < quantity) {
            showScanMessage('‚ùå Insufficient quantity available!', 'error');
            return;
        }

        issuances.push({
            id: nextIssuanceId++,
            item_id: itemId,
            department_id: deptId,
            recipient_name: recipient,
            purpose: purpose,
            issued_by: issuedBy,
            quantity: quantity,
            issued_date: new Date().toISOString().split('T')[0]
        });

        item.available_quantity -= quantity;

        showScanMessage(`‚úÖ Successfully issued ${quantity} x ${item.name} to ${recipient}!`, 'success');
        setTimeout(() => {
            resetScan();
            renderDashboard();
        }, 2000);
    });

    function showScanMessage(text, type) {
        const msg = document.getElementById('scan-message');
        msg.textContent = text;
        msg.className = `mt-6 p-4 rounded-xl font-semibold text-lg ${type === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`;
        msg.classList.remove('hidden');
        setTimeout(() => msg.classList.add('hidden'), 3000);
    }

    function renderLabels() {
        const container = document.getElementById('labels-container');
        container.innerHTML = items.map(item => {
            const cat = categories.find(c => c.id === item.category_id).name;
            return `
                <div class="glass rounded-2xl shadow-lg p-6 card-hover">
                    <div class="text-center">
                        <p class="font-bold text-xl mb-3 text-gray-800">${item.name}</p>
                        <svg id="barcode-${item.id}" class="mx-auto"></svg>
                        <p class="text-sm text-gray-600 mt-3">${cat}</p>
                        <p class="text-xs font-mono text-blue-600 font-semibold mt-1">${item.location}</p>
                    </div>
                </div>
            `;
        }).join('');

        setTimeout(() => {
            items.forEach(item => {
                JsBarcode(`#barcode-${item.id}`, item.barcode, {
                    format: "CODE128",
                    width: 2,
                    height: 50,
                    displayValue: true
                });
            });
        }, 100);
    }

    function printLabels() {
        window.print();
    }

    function setupAddItem() {
        const catSelect = document.getElementById('new-category');
        catSelect.innerHTML = '<option value="">Select Category</option>' + 
            categories.map(c => `<option value="${c.id}">${c.icon} ${c.name}</option>`).join('');
    }

    document.getElementById('add-item-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('new-name').value;
        const categoryId = parseInt(document.getElementById('new-category').value);
        const shelf = document.getElementById('new-shelf').value;
        const row = document.getElementById('new-row').value;
        const position = document.getElementById('new-position').value;
        const quantity = parseInt(document.getElementById('new-quantity').value);

        const barcode = `IT${String(nextItemId).padStart(3, '0')}`;
        const location = `S${shelf}-R${row}-P${position}`;

        items.push({
            id: nextItemId++,
            barcode: barcode,
            category_id: categoryId,
            name: name,
            location: location,
            total_quantity: quantity,
            available_quantity: quantity
        });

        issuances.push({
            id: nextIssuanceId++,
            item_id: nextItemId - 1,
            department_id: 1,
            recipient_name: 'Stock',
            purpose: 'Initial Entry',
            issued_by: 'System',
            quantity: quantity,
            issued_date: new Date().toISOString().split('T')[0]
        });

        showAddMessage(`‚úÖ Item added successfully! Barcode: ${barcode}, Location: ${location}`, 'success');
        this.reset();
        document.getElementById('new-quantity').value = '0';
    });

    function showAddMessage(text, type) {
        const msg = document.getElementById('add-message');
        msg.textContent = text;
        msg.className = `mt-6 p-4 rounded-xl font-semibold text-lg ${type === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`;
        msg.classList.remove('hidden');
        setTimeout(() => msg.classList.add('hidden'), 4000);
    }

    // Initialize on load
    showPage('dashboard');
</script>
```

</body>
</html>
